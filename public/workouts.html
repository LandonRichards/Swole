<!DOCTYPE html>
<html>

<head>
    <title>My Workouts</title>
</head>
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<body>
    <div class="container">
        <div class=“jumbotron”>
            <h1 style="text-align: center">My Workouts</h1>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Enter a workout</h3>
                </div>
                <div class="panel-body">
                    <form class="form-inline" id="myWorkouts">
                        <select class="custom-select" id='addWorkout'>
                            <option selected>Choose Your Workout</option>
                            <option value="cardio">Cardio</option>
                            <option value="legs">Leg Day</option>
                            <option value="arms">Upper body/Arms</option>
                            <option value="core">Core Workout</option>
                            <input type="text" class="form-control" id="minutes" aria-describedby="addMinutes" placeholder="Minutes?">
                        </select>
                        <button type="button" class="btn btn-primary" id="submit">Submit</button>
                    </form>
                </div>
            </div>
            <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading">
                    <h2 class="mb">Smack Talk Message Board</h2>
                    <div class="current-messages">
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading">My Workouts</div>
            <!-- Table -->
            <table class="table">
                <thead>
                    <th>Date</th>
                    <th>Title</th>
                    <th>Points Earned</th>
                </thead>
                <tbody>
                    <tr>
                        <td>2/2/2015</td>
                        <td>Cardio</td>
                        <td>10</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
<script type="text/javascript">
$(document).ready(function() {
    var userName = localStorage.getItem('username');
    //I am not sure if this will work, need to add dummy data to it
    $.get('/api/messages',function(data){
        for(let i = 0; i<data.length;i++){
            var user = $('<h3>').text(data[i].userName);
            var message = $('<p>').text(data[i].message);
            $(".current-messages").append(user+ ": "+ message) 
        }
    });

    //this is where I left off
    $.post('/api/workouts', userName, function(data) {
        console.log(data)
        // for (let i = 0; i < data.length; i++) {

        // }
    })
});

$('#submit').on('click', function() {
    var type = $("#addWorkout").val();
    var mins = parseInt($("#minutes").val().trim());
    if (mins !== mins * 1 || type == "Choose Your Workout") {
        alert('There is an error with your submission')
    } else {
        var points;
        switch (type) {
            case "cardio":
                points = mins * 2;
                break;
            case "legs":
                points = mins * 5;
                break;
            case "arms":
                points = mins * 5;
                break;
            case "core":
                points = mins * 7;
                break;
            default:
                break;
        };
    }
    var newWorkout = {
        userName: userName,
        workoutTitle: type,
        points: points
    }
    $.post("/api/workouts", newWorkout);

    alert('Workout Added. Nice job!');
    location.reload();
})
</script>

</html>